<template name="permissionsSearch">
    <div class="visible-xs">
        <select id="permission-search-field" class="form-control">
            <option value="module">{{_ "module" }}</option>
            <option value="operation">{{_ "operation" }}</option>
        </select>
    </div>
    <form id="search-permissions-form" class="pull-right form-inline">
        <div class="form-group">
            <div class="input-group">
                <input id="search-permissions" type="text" class="form-control" data-form-type="role"
                       aria-label="Search" placeholder="{{_ "search" }}"/>
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-fab btn-fab-mini">
                        <i class="fa fa-search" data-form-type="search"></i>
                    </button>
                </span>
            </div>
        </div>
    </form>
</template>

<template name="newPermission">
    <form id="new-permission-form" class="form-inline new-form">
        <div class="form-group label-floating">
            <label class="control-label" for="new-permission-module">{{_ "module" }}</label>
            <input id="new-permission-module" type="text" class="form-control">
        </div>
        <div class="form-group">
            <div class="input-group">
                <select id="new-permission-operation" class="form-control">
                    <option value="empty" disabled selected> -- {{_ "selectOperation" }} --</option>
                    <option value="view">{{_ "view" }}</option>
                    <option value="add">{{_ "add" }}</option>
                    <option value="edit">{{_ "edit" }}</option>
                    <option value="delete">{{_ "delete" }}</option>
                </select>
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-fab btn-fab-mini">
                        <i class="fa fa-plus"></i>
                    </button>
                </span>
            </div>
        </div>
    </form>
</template>

<template name="permissions">
    <table id="permissions-list" class="table table-striped table-hover">
        <thead>
        <tr class="hidden-xs">
            <td class="active" data-search-name="module">{{_ "module" }}</td>
            <td data-search-name="operation">{{_ "operation" }}</td>
        </tr>
        </thead>
        <tbody>
        {{#each permissions}}
            {{> permission}}
        {{/each}}
        </tbody>
        <tfoot>
        <tr>
            <td colspan="2">
                {{> defaultBootstrapPaginator pagination=templatePagination limit=6 containerClass="text-center"}}
            </td>
        </tr>
        </tfoot>
    </table>
</template>

<template name="permission">
    <tr class="{{selectedPermission}}">
        <td>
            <span class="hidden-xs">{{ module }}</span>
            <div class="visible-xs">
                <p><strong>{{_ "module" }}:</strong> {{ module }}</p>
                <p><strong>{{_ "operation" }}:</strong> {{ operation }}</p>
            </div>
        </td>
        <td class="hidden-xs">{{ operation }}</td>
    </tr>
</template>

<template name="editPermissionModal">
    <div id="edit-permission-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">{{_ "editPermission" }}</h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedPermission}}
                            <div class="form-group">
                                <input id="edit-permission-module" class="form-control" type="text" placeholder="Module"
                                       value="{{module}}">
                            </div>
                            <div class="form-group">
                                <select id="edit-permission-operation" class="form-control">
                                    <option value="empty" disabled selected>--{{_ "selectOperation" }}--</option>
                                    <option value="view" {{operationEquals 'view'}} >{{_ "viewOperation" }}</option>
                                    <option value="add" {{operationEquals 'add' }} >{{_ "addOperation" }}</option>
                                    <option value="edit" {{operationEquals 'edit' }} >{{_ "editOperation" }}</option>
                                    <option value="delete" {{operationEquals 'delete' }} >{{_ "deleteOperation" }}</option>
                                </select>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-raised btn-sm btn-primary">
                            <i class="fa fa-floppy-o"></i> {{_ "save" }}
                        </button>
                        <button type="button" class="btn btn-raised btn-sm btn-danger" data-dismiss="modal">
                            <i class="fa fa-times"></i> {{_ "close" }}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>

<template name="deletePermissionModal">
    <div id="delete-permission-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">{{_ "deletePermission" }} <i class="fa fa-warning"></i></h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedPermission}}
                            <div>
                                <p>{{_ "deleteAcceptMessage" }}  <strong>{{module}} - {{operation}}</strong> ?</p>
                                <p class="alert alert-danger">
                                    <strong>{{_ "warning" }}:</strong> {{_ "warningMessage" }}
                                </p>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-raised btn-sm btn-danger">
                            <i class="fa fa-check"></i> {{_ "accept" }}
                        </button>
                        <button type="button" class="btn btn-raised btn-sm btn-primary" data-dismiss="modal">
                            <i class="fa fa-times"></i> {{_ "cancel" }}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>