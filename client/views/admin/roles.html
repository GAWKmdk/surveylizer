<template name="rolesSearch">
    <div class="visible-xs">
        <select id="role-search-field" class="form-control">
            <option value="name">{{_ "name"}}</option>
        </select>
    </div>
    <form id="search-roles-form" class="pull-right form-inline">
        <div class="form-group">
            <div class="input-group">
                <input id="search-roles" type="text" class="form-control" data-form-type="role"
                       aria-label="Search" placeholder="{{_ "search"}}"/>
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-fab btn-fab-mini">
                        <i class="fa fa-search" data-form-type="search"></i>
                    </button>
                </span>
            </div>
        </div>
    </form>
</template>

<template name="newRole">
    <form id="new-role-form" class="form-inline new-form">
        <div class="form-group label-floating">
            <label class="control-label" for="new-role-name">{{_ "addNewRole"}}</label>
            <div class="input-group">
                <input id="new-role-name" type="text" class="form-control" data-form-type="role"/>
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-fab btn-fab-mini">
                        <i class="fa fa-plus"></i>
                    </button>
                </span>
            </div>
        </div>
    </form>
</template>

<template name="roles">
    <table id="roles-list" class="table table-striped table-hover">
        <thead>
        <tr class="hidden-xs">
            <td class="active" data-search-name="name">{{_ "name" }}</td>
            <td class="disabled">{{_ "numberOfUsers" }}</td>
        </tr>
        </thead>
        <tbody>
        {{#each roles}}
            {{> role}}
        {{/each}}
        </tbody>
        <tfoot>
        <tr>
            <td colspan="2">
                {{> defaultBootstrapPaginator pagination=templatePagination limit=6 containerClass="text-center"}}
            </td>
        </tr>
        </tfoot>
    </table>
</template>

<template name="role">
    <tr class="{{selectedRole}}">
        <td>
            <span class="hidden-xs">{{name}}</span>
            <div class="visible-xs">
                <p><strong>{{_ "name" }}:</strong> {{name}}</p>
                <p><strong>{{_ "numberOfUsers" }}:</strong> {{numberOfUsers _id}}</p>
            </div>
        </td>
        <td class="hidden-xs">{{numberOfUsers _id}}</td>
    </tr>
</template>

<template name="editRoleModal">
    <div id="edit-role-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">{{_ "editRole" }}</h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedRole}}
                            <div class="form-group">
                                <input id="edit-role-name" class="form-control" type="text" placeholder="{{_ "name" }}"
                                       value="{{name}}">
                            </div>
                            <h4>{{_ "permission_plural"}}</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <div id="add-permission" class="input-group">
                                        <select id="available-permission" class="form-control">
                                            <option value="empty" disabled selected>--{{_ "selectPermission" }}--</option>
                                            {{#each availablePermissions}}
                                                <option value="{{_id}}">{{ module }} - {{ operation }}</option>
                                            {{/each}}
                                        </select>
                                        <span class="input-group-addon">
                                            <a href="#">
                                                <i id="add-permission-button" class="fa fa-plus"></i>
                                            </a>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <ul id="role-permissions" class="list-group">
                                        {{#if hasPermissions}}
                                            {{#each rolePermissions}}
                                                <li class="list-group-item">
                                                    <a href="#"><i class="remove-permission fa fa-times-circle"></i></a>
                                                    {{module}} - {{operation}}
                                                </li>
                                            {{/each}}
                                        {{ else }}
                                            <li class="list-group-item">
                                                <i class="fa fa-info"></i> {{_ "noPermissionsAdded" }}
                                            </li>
                                        {{/if}}
                                    </ul>
                                </div>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-sm btn-primary btn-raised">
                            <i class="fa fa-floppy-o"></i> {{_ "save" }}
                        </button>
                        <button type="button" class="btn btn-raised btn-sm btn-danger" data-dismiss="modal">
                            <i class="fa fa-times"></i> {{_ "close" }}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>

<template name="deleteRoleModal">
    <div id="delete-role-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">{{_ "deleteRole" }} <i class="fa fa-warning"></i></h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedRole}}
                            <div>
                                <p>{{_ "deleteAcceptMessage" }} <strong>{{name}}</strong> ?</p>
                                <p class="alert alert-danger">
                                    <strong>{{_ "warning" }}:</strong> {{_ "warningMessage" }}!
                                </p>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-raised btn-sm btn-danger">
                            <i class="fa fa-check"></i> {{_ "accept" }}
                        </button>
                        <button type="button" class="btn btn-raised btn-sm btn-primary" data-dismiss="modal">
                            <i class="fa fa-times"></i> {{_ "cancel" }}
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>