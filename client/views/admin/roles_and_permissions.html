<template name="rolesAndPermissions">
    <div class="row">
        <div class="col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading clearfix">
                    <h4 class="pull-left">User Roles</h4>
                    <div class="pull-right">
                        <form id="new-role-form" class="form-inline">
                            <div class="input-group">
                                <input id="new-role-name" type="text" class="form-control" data-form-type="role" aria-label="New Role" placeholder="Add New Role">
                                <span class="input-group-addon"><i class="fa fa-plus" data-form-type="role"></i></span>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="panel-body">
                    <table id="roles-list" class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <td>Name</td>
                            <td>No. of Users</td>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each roles}}
                            <tr class="{{selectedRole}}">
                                <td>{{name}}</td>
                                <td>{{numberOfUsers _id}}</td>
                            </tr>
                        {{/each}}
                        </tbody>
                    </table>
                </div>
                <div class="panel-footer">
                    {{#if isRoleSelected}}
                        <button id="edit-role" class="btn btn-warning" data-toggle="modal" data-target="#edit-role-modal"><i class="fa fa-pencil"></i> Edit</button>
                        <button id="delete-role" class="btn btn-danger" data-toggle="modal" data-target="#delete-role-modal"><i class="fa fa-times"></i> Delete</button>
                    {{/if}}
                </div>
            </div>
        </div>
        <div class="col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading clearfix">
                    <h4 class="pull-left">User Permissions</h4>
                    <div class="pull-right">
                        <form id="new-permission-form" class="form-inline">
                            <div class="input-group">
                                <input id="new-permission-name" type="text" class="form-control" data-form-type="permission" aria-label="New Permission" placeholder="Add New Permission">
                                <span class="input-group-addon"><i class="fa fa-plus" data-form-type="permission"></i></span>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="panel-body">
                    <table id="permissions-list" class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <td>Name</td>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each permissions}}
                        <tr class="{{selectedPermission}}">
                            <td>{{name}}</td>
                        </tr>
                        {{/each}}
                        </tbody>
                    </table>
                </div>
                <div class="panel-footer">
                    {{#if isPermissionSelected}}
                        <button id="edit-permission" class="btn btn-warning" data-toggle="modal" data-target="#edit-permission-modal"><i class="fa fa-pencil"></i> Edit</button>
                        <button id="delete-permission" class="btn btn-danger" data-toggle="modal" data-target="#delete-permission-modal"><i class="fa fa-times"></i> Delete</button>
                    {{/if}}
                </div>
            </div>
        </div>
    </div>
    {{> editRoleModal }}
    {{> deleteRoleModal }}
    {{> editPermissionModal }}
    {{> deletePermissionModal }}
</template>

<template name="editRoleModal">
    <div id="edit-role-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Edit Role</h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedRole}}
                            <div class="form-group">
                                <input  id="edit-role-name" class="form-control" type="text" placeholder="Name" value="{{name}}">
                            </div>
                            <h4>Permissions</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <div id="add-permission" class="input-group">
                                        <select id="available-permission" class="form-control">
                                            <option value="empty" disabled selected>--Select Permission--</option>
                                            {{#each availablePermissions}}
                                                <option value="{{_id}}">{{name}}</option>
                                            {{/each}}
                                        </select>
                                        <span class="input-group-addon"><i id="add-permission-button" class="fa fa-plus" data-form-type="role"></i></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <ul id="role-permissions" class="list-group">
                                        {{#if hasPermissions}}
                                            {{#each rolePermissions}}
                                                <li class="list-group-item"><a href="#"><i class="remove-permission fa fa-times-circle"></i></a> {{name}}</li>
                                            {{/each}}
                                        {{ else }}
                                            <li class="list-group-item"><i class="fa fa-info"></i> No Permissions added yet!</li>
                                        {{/if}}
                                    </ul>
                                </div>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" tabindex="7" ><i class="fa fa-floppy-o"></i> Save</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>

<template name="deleteRoleModal">
    <div id="delete-role-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Delete Role <i class="fa fa-warning"></i></h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedRole}}
                            <div>
                                <p>Are you sure you want to delete the user role: <strong>{{name}}</strong> ?</p>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-danger" tabindex="7" ><i class="fa fa-check"></i> Accept</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal"><i class="fa fa-times"></i> Cancel</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>

<template name="editPermissionModal">
    <div id="edit-permission-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Edit Permission</h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedPermission}}
                            <div class="form-group">
                                <input  id="edit-permission-name" class="form-control" type="text" placeholder="Name" value="{{name}}">
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" tabindex="7" ><i class="fa fa-floppy-o"></i> Save</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>

<template name="deletePermissionModal">
    <div id="delete-permission-modal" class="modal">
        <form>
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Delete Permission <i class="fa fa-warning"></i></h4>
                    </div>
                    <div class="modal-body">
                        {{#with selectedPermission}}
                            <div>
                                <p>Are you sure you want to delete the user permission: <strong>{{name}}</strong> ?</p>
                            </div>
                        {{/with}}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-danger" tabindex="7" ><i class="fa fa-check"></i> Accept</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal"><i class="fa fa-times"></i> Cancel</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</template>