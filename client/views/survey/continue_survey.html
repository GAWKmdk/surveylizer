<template name="continueSurvey">
    <div class="panel panel-default">
        <div class="panel-heading clearfix">
            <h4 class="pull-left">Continue Survey</h4>
            <form class="pull-right form-inline">
                <div id="search-survey-to-continue" class="form-group">
                    <div class="input-group">
                        <input id="search-survey-to-continue" type="text" class="form-control" data-form-type="role"
                               aria-label="Search" placeholder="Search"/>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-fab btn-fab-mini">
                                <i class="fa fa-search" data-form-type="search"></i>
                            </button>
                        </span>
                    </div>
                </div>
            </form>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-hover">
                <thead>
                <tr class="text-center">
                    <td>Code</td>
                    <td>Name</td>
                    <td>User</td>
                    <td>Started</td>
                </tr>
                </thead>
                <tbody>
                {{#if hasContinueSurvey}}
                    {{#each continueSurveyList}}
                        <tr class="{{selectedContinueSurvey}} text-center">
                            <td>{{questionnaire.code}}</td>
                            <td>{{questionnaire.name}}</td>
                            <td>{{user.fullName}}</td>
                            <td>{{timeStarted}}</td>
                        </tr>
                    {{/each}}
                {{else}}
                    <tr>
                        <td colspan="5">
                            <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"> </i> There are no surveys started!</div>
                        </td>
                    </tr>
                {{/if}}
                </tbody>
            </table>
        </div>
        <div class="panel-footer">
            <a id="continue-completed-survey" type="button" class="btn btn-sm btn-primary btn-raised" {{canContinueSurvey}} >
                <i class="fa fa-forward"></i> Continue
            </a>
            <a id="view-completed-survey" type="button" class="btn btn-sm btn-primary btn-raised" data-toggle="modal"
               data-target="#view-survey-modal" {{canContinueSurvey}}>
                <i class="fa fa-list-ol"></i> View
            </a>
            <a id="delete-completed-survey" type="button" class="btn btn-sm btn-danger btn-raised" data-toggle="modal"
               data-target="#delete-survey-modal" {{canContinueSurvey}}>
                <i class="fa fa-times"></i> Delete
            </a>
        </div>
    </div>
    {{> viewSurveyModal }}
    {{> deleteSurveyModal }}
</template>

<template name="viewSurveyModal">
    <div id="view-survey-modal" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <h4 class="modal-title">Survey Details</h4>
                </div>
                <div class="modal-body">
                    {{#with selectedSurvey}}
                        <div class="panel">
                            <div class="panel-heading">
                                <h4>{{questionnaire.name}}</h4>
                                <ul>
                                    <li><strong>Address:</strong> {{location.address}}</li>
                                    <li><strong>Latitude:</strong> {{location.latitude}}</li>
                                    <li><strong>Longitude:</strong> {{location.longitude}}</li>
                                </ul>
                            </div>
                            <div class="panel-body">
                                {{#each questionnaire.questions}}
                                    <div class="question-display">
                                        <h4>{{orderNumber}}. {{detail}}</h4>
                                        {{#each this.answers selectedSurvey._id}}
                                            <div class="answer">
                                                <p>
                                                    {{#unless isTypeOpenEnded}}
                                                        <span class="">{{choiceOrderNumber}}</span>.
                                                    {{/unless}}
                                                    {{value}}
                                                </p>
                                            </div>
                                        {{/each}}
                                    </div>
                                {{/each}}
                            </div>
                        </div>
                    {{/with}}
                </div>
            </div>
        </div>
    </div>
</template>
